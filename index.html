<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="x5-fullscreen" content="true">

    <title>小票信息</title>

    <link rel="stylesheet" href="css/pintuer.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/index.css">

    <script src="js/jquery.js"></script>

    <script src="js/myAlert.js"></script>
    <link rel="stylesheet" href="css/myAlert.css">

</head>
<body>


<div class="box">
    <div class="panel admin-panel">
        <div class="panel-head"><strong>小票信息</strong></div>
        <div class="body-content">
            <form method="post" class="form-x info" action="">
                <div class="form-group">
                    <div class="label">
                        <label>手机号/电子会员卡号：</label>
                    </div>
                    <div class="field">
                        <input type="text" class="input inputs phone" name="" value="" autofocus/>
                        <label class="hint" id="showInfo">
                            sggadsdf
                        </label>
                        <div class="tips"></div>

                    </div>

                </div>
                <div class="form-group">
                    <div class="label">
                        <label>加油金额：</label>
                    </div>
                    <div class="field">
                        <input type="text" class="input inputs gunmoney" name="sentitle" value=""/>

                        <div class="tips"></div>
                        <label hidden class="numbername">加油升数：</label>
                        <input type="hidden" class="input number" name="sentitle" value=""/>
                    </div>
                </div>
                <div class="form-group">
                    <div class="label">
                        <label>汽油类型：</label>
                    </div>
                    <div class="field radionbox" onclick="">
                        <input type="radio" name="radio" class="radio" value="92" checked="checked">92
                        <input type="radio" name="radio" class="radio" value="95">95
                        <input type="radio" name="radio" class="radio" value="柴油">柴油
                        <div class="tips"></div>
                    </div>

                        <label class="price" style="display: none">单价：</label>

                        <input type="text" class="input gasprice" name="surl" value="" disabled="disabled" style="display: none"/>

                        <div class="tips"></div>
                </div>
                <div class="form-group">
                    <div class="label">
                        <label onclick="addthml()">优惠券：</label>
                    </div>
                    <div class="field">
                        <input type="text" class="input inputs" name="stitle" value="" />
                        <div class="tips"></div>
                    </div>
                    <!--<div class="field prebox">
                        <input type="checkbox" class="coupon">
                        <label class="pre">满200减20</label>
                        <div class="tips"></div>
                    </div>-->
                </div>
                <div class="form-group">
                    <div class="label">
                        <label></label>
                    </div>
                    <div class="field">
                        <button class="button bg-main count" type="button">计算 </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="panel admin-panel">
        <div class="body-content">
            <form method="post" class="form-x paybox" action="">
                <div class="form-group">
                    <div class="label">
                        <label>应付金额：</label>
                    </div>
                    <div class="field">
                        <input type="text" class="input showamount inputs" name="stitle" disabled value="" />
                        <div class="tips"></div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="label">
                        <label>优惠金额：</label>
                    </div>
                    <div class="field">
                        <input type="text" class="input showfav inputs" name="stitle" disabled value="" />
                        <div class="tips"></div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="label">
                        <label>实付金额：</label>
                    </div>
                    <div class="field">
                        <input type="text" class="input showpay inputs" name="stitle" disabled value="" />
                        <div class="tips"></div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="label">
                        <label>支付方式：</label>
                    </div>
                    <div class="field radionbox" onclick="">
                        <input type="radio" name="radio" class="radio" value="微信" checked="checked">微信
                        <input type="radio" name="radio" class="radio" value="支付宝">支付宝
                        <input type="radio" name="radio" class="radio" value="现金">现金
                        <div class="tips"></div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="label">
                        <label></label>
                    </div>
                    <div class="field">
                        <button class="button bg-main btn" type="button">保存 </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<button class="down2" onclick="downloadForJS()">转换</button>

<script src="js/index.js"></script>
<script src="js/html2canvas.js"></script>

<script>
    // 添加优惠券
    function addthml(){
        var addhtml1="<input type='checkbox' class='coupon' value=''>";
        var addhtml2="<label class='pre'>满200减20</label>";
        var addhmlt3="<div class='tips'></div>";

        var prebox=$(".prebox");
        prebox.append(addhtml1+addhtml2+addhmlt3);
    }

    // 自动生成图片
    function downloadForJS(){
        //使用html2canvas 转换html为canvas
        html2canvas(document.body).then(function(canvas) {

            var imgUri = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); // 获取生成的图片的url 　
            var saveLink = document.createElement( 'a');
            var n=0;
            var filePath="image/";
            saveLink.href =imgUri;
            saveLink.download = n+1+'.'+'png';//图片下载到本地
            saveLink.click();
            console.log(imgUri);
            imgUri.save(filePath);

            /*$.ajax({                                   //通过ajax将图片数据传到后台
                type : 'post',
                url : 'data.json',
                data: 'dataURL=' + imgUri,
                async : false, //同步方式
                success : function() {
                    console.log("上传成功！");
                }
            });*/

        });
    }
</script>

</body></html>